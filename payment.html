<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
    <script
      src=" https://kit.fontawesome.com/24c494a6b6.js"
      crossorigin="anonymous"
    ></script>

    <style>
        
        
        #bar{
     display: flex;
     height: 80px;
     width: 100%;
     margin:0;
      background-color:#CF102D;
      justify-content:space-between;
      align-items: center;
    }
    h3{
        padding-left: 40px;
        padding-right: 40px;
        color: white;
    }
    #container{
        width: 100%;
       background-color: #FCF3EC;
       display: flex;
       flex-direction: row;
       gap: 20px;
    }
    #right{
        width: 30%;
        background-color: white;
        padding: 50px;
        font-family:'Poppins', sans-serif ;
       
    }
    #left{
        width: 70%;
        padding-left: 50px;
        padding-right: 30px;
        background-color: #FCF3EC;
        margin-right: 25px;
    
    }
 #right_top>div{
   display: flex;
   flex-direction: column;
 }
#right_top>div>div{
    display: flex;
    justify-content: space-between;
 
}
#right_top>div>div:nth-child(1){
    border-bottom: 3px solid rgb(153, 152, 152);
}
#voucherform {
  width: 300px;
  height: 50px;;
  display:flex;
  flex-direction:row;
  border:1px solid grey;
  padding:10px;
  border-radius: 30px;
  padding-left: 20px;
  margin-left: 30px;
  box-shadow: rgba(0, 0, 0, 0.19) 1px -5px 0px, rgba(0, 0, 0, 0.23) 0px 6px 6px;
  margin-top: 30px;
 
}
#voucherinput {
    font-family:'Poppins', sans-serif ;
  flex-grow:2;
  
  border:none;
}
#voucherinput:focus {
  
  outline: none;
}

h2{
    font-family:'Poppins', sans-serif ; 
    font-size: 20px;
    font-weight: bolder;
}
#checkoutbtn{
    border-radius: 30px;
    width: 280px;
    height: 50px;
    font-size: 20px;
    margin-top: 20px;
    margin-left: 30px;
    border:2px solid #CF102D;
    box-shadow: #CF102D 1px 4px 0px, rgba(0, 0, 0, 0.23) 0px 6px 6px;
    background-color: white;
}
#checkoutbtn:hover{
    cursor: pointer;
} 
#voucherinput:focus {
  
  outline: none;
}
 
    #left .title{
       
       font-size: 30px;
       padding-top: 80px;
       margin-bottom: 40px;
    }
   #form{
       display: grid;
      }
#in1{
height: 50px;
width: 80%;
margin-top: 10px;
margin-bottom: 30px;
padding-left: 25px;
border-radius: 30px;
font-size: 17px;

}
#in2{
    height: 50px;
width: 290px;
margin-top: 10px;
margin-bottom: 30px;
padding-left: 25px;
border-radius: 30px;
font-size: 17px;

}
.delatile{
    font-size: 18px;
}
#set{
    width: 82%;
    height: 50px;
   
    display: flex;
  justify-content: space-between;
  margin-bottom: 60px;
}
#font{
    font-size: 19px;
    margin-bottom: 40px;
    color: gray;
    
}
 #contactChoice1{
    margin-left: 30px;
}
p{
    font-size: 19px;
}
#submit{
    height: 60px;
    width: 20%;
    border-radius: 50px;
    background-color: white;
    border-color:#CF102D;
    font-size: 19px;
}
#size{
    font-size: 18px;
}
#right>div>div{
    display: flex;
    justify-content: space-between;
}
#right>div>div:nth-child(2){
    border-bottom: 1px solid black;
}
#voucherform {
  width: 650px;
  height: 40px;;
  display:flex;
  flex-direction:row;
  border:1px solid grey;
  padding:10px;
  border-radius: 30px;
  padding-left: 20px;
  margin-left: 30px;
}
#voucherinput {
  
  flex-grow:2;
  
  border:none;
}
#voucherinput:focus {
  
  outline: none;
}



    </style>
</head>
<body>
    
    
      <div id="bar">
        <h3>Back to your bag</h3>
        <div><a href="index.html"><img src="assest/img/logopng.png" width="130px" height="60px" alt=""></a></div>
        <h3>Secure checkout</h3>
      </div>
        <div id="container">
            <div id="left">
                <div class="title">New address</div>
                <form id="form">
           
                <div class="input_box">
                    <span class="delatile">Name*</span><br>
                    <input type="text" id="in1" placeholder="Enter your name*" required>
                 </div>
                 <div class="input_box">
                    <span class="delatile">Street address*</span><br>
                    <input type="text" id="in1" placeholder="Enter your address*" required>
                 </div>
                 <div id="set">
                 <div class="input_box">
                    <span class="delatile">Pincode*</span><br>
                    <input type="text" id="in2" placeholder="Enter your pincode*" required>
                 </div>
                 <div class="input_box">
                    <span class="delatile">City*</span><br>
                    <input type="text" id="in2" placeholder="Enter your pincode*" required>
                 </div>
                </div>
                <div id="set">
                 <div class="input_box">
                    <span class="delatile">State*</span><br>
                    <input type="text" id="in2" placeholder="Enter your State*" required>
                 </div>
                 <div class="input_box">
                    <span class="delatile">Receiver mobile number*</span><br>
                    <input type="text" id="in2" placeholder="Enter receiver mobile number *" required>
                 </div>
                </div>
                 <div class="input_box">
                    <span class="delatile">Email*</span><br>
                    <input type="text" id="in1" placeholder="Enter your email*" required>
                 </div>
                 <div >
                 <p >Address type*</p>
                 <div id="font">
                
                            <input type="radio" id="contactChoice1" name="contact" value="Home">
                            <label for="contactChoice1">Home</label>
                        
                            <input type="radio" id="contactChoice1" name="contact"  value="Office">
                            <label for="contactChoice1">Office</label>
                        </div>
                    </div >
                        <input type="submit" value="Continue" id="submit"></input>
                        <div id="size"><p ><i class="fa-solid fa-arrow-left"></i> Back</p></div>
                         
            
    </form>
  </div>
  <div id="right">
    <div id="right_top"></div>
    <div id="right_bottom">
       
     </div>
</div>
    </div>
</div>


</body>
</html>
<script>
  var data=JSON.parse(localStorage.getItem("bagitem"))||[];
   
   if(data.length!=0)
   {
var total = data.reduce(function (sum, elem, index, arr) {
    return sum + Number(elem.price);
  }, 0);
  var length = data.length;
  var bag=document.createElement("div");
  var items=document.createElement("div");
   var items1=document.createElement("h2");
   items1.innerText=length+" items";
   
     var items2=document.createElement("h2");
   items2.innerHTML="&#8377; "+total
    items.append(items1,items2);
   
    var del=document.createElement("div");
   var delcont=document.createElement("h2");
    delcont.innerText="Delivery"
     var delcost=document.createElement("h2");
   delcost.innerHTML="&#8377; "+100;
    del.append(delcont,delcost);
    var tot=document.createElement("div");
   var totprice=document.createElement("h2");
    totprice.innerText="Total"
     var pricetot=document.createElement("h2");
    if(total<999)
    pricetot.innerHTML="&#8377; "+total+100;
    else
    pricetot.innerHTML="&#8377; "+total;
    tot.append(totprice,pricetot);

  var voucher=document.createElement("div");
  var voucherform=document.createElement("form");
  voucherform.setAttribute("id","voucherform");
  var voucherinput=document.createElement("input");
  voucherinput.setAttribute("placeholder","Apply Voucher Code")
  voucherinput.setAttribute("id","voucherinput");
  var img1=document.createElement("img");
  img1.src=" assest/img/pngegg.png";
  img1.style.width="30px"
  var voucherbutton=document.createElement("button");
  voucherbutton.style.backgroundColor="white";
  voucherbutton.style.border="0px";
  voucherbutton.setAttribute("id","inputimg");
  voucherbutton.addEventListener("click",voucherfun);
  counter=0;
  function voucherfun(){
    counter++;
    event.preventDefault();
      if(voucherinput.value=="hamleys30" && counter ==1){
          per=total*0.30;
          pricetot.innerHTML="&#8377; "+(total-per);
          bag.innerHTML="";
          tot.innerHTML="";
          tot.append(totprice,pricetot);
           alert("Voucher Applied to Total Amount")
          bag.append(items,tot);
      }
      else if(counter!=1 && voucherinput.value=="hamleys30" )
      {
          alert("Duplicate Voucher Code")
      }
      else
         alert("Invalid Voucher Code")
  }
  voucherform.append(voucherinput,voucherbutton)
   voucher.append(voucherform)
   
   if(total<999){
    bag.append(items,del,tot,voucher);
   }
   else
   {
    bag.append(items,tot,voucher);
   }
    document.querySelector("#right_top").append(bag);
    document.querySelector("#inputimg").append(img1);


   

   document.querySelector("#inputimg").addEventListener("onClick",vouchercal);
   function vouchercal(){
    
       var b=document.querySelector("voucherinput").value;
        
     }
     

    //right_bottom
    var rightitems=document.createElement("div");
   var rightitems1=document.createElement("h2");
   rightitems1.innerText=length+" Items in your bag";
   rightitems.append(rightitems1);
   document.querySelector("#right_bottom").append(rightitems);

  //right bottom item push
 
        data.map(function(elem,i){
            var maindiv=document.createElement("div");
            maindiv.style.margin="20px";
            maindiv.style.backgroundColor="#FCF3EC";
            maindiv.style.borderRight="3px solid orange"
           maindiv.style.borderBottom ="3px solid orange";
            maindiv.style.display="flex";
            maindiv.style.justifyContent="space-between";
            var img=document.createElement("img");
            img.src=elem.img;
            img.style.width="120px"
            img.style.height="120px"
            var itemdiv=document.createElement("div");
            itemdiv.style.width="280px"
            var probrand=document.createElement("div");
            probrand.innerText=elem.probrand;
            var head=document.createElement("h4");
            head.innerText=elem.proname;
            head.style.fontFamily="Poppins, sans-serif"
            head.style.fontWeight="bold";
            var movetodiv=document.createElement("div");
            movetodiv.style.display="flex";
            movetodiv.style.justifyContent="space-between";

            var moneydiv=document.createElement("div");
            moneydiv.innerHTML="&#8377; "+elem.price;
            
            movetodiv.append(moneydiv);
            itemdiv.append(probrand,head,movetodiv);
            maindiv.append(img,itemdiv);
            document.querySelector("#right_bottom").append(maindiv);
 


            })






 }
else
       {
 
          document.querySelector("#container").innerText="";
          document.querySelector("#container").style.display="block";
          document.querySelector("#container").style.textAlign="center";
          document.querySelector("#container").style.height="400px";
          document.querySelector("#container").style.backgroundColor="white";
           var head=document.createElement("h2");
           head.innerText="YOUR CART IS EMPTY ";
           head.style.fontSize="30px";
           head.style.paddingTop="30px";
          var para=document.createElement("p");
          para.innerHTML="Click here to continue shopping."

          document.querySelector("#container").append(head,para);
       }



       
   if(localStorage.getItem("success")==1){
         var bag=document.querySelector("#loginpage").innerText="";
         logdiv=document.createElement("div");
         img=document.createElement("img");
         img.src="assest/img/teddy.png";
         img.style.width="20px";
         var acc=document.createElement("a");
         acc.href="index.html";
         acc.innerText="Account";
         logdiv.append(img,acc);
         document.querySelector("#loginpage").append(logdiv);
        }
     

    </script>